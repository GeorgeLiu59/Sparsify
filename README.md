# Sparsify

This repo contains code to visualize the effects of sparsifying a line drawing based on threshold and/or curve detection. This is intended for use on line drawings generated from https://github.com/carolineec/informative-drawings.

## Installing Dependencies
```
pip install numpy opencv-python PyQt5 torch transformers pillow
```

## Sparsifying by threshold
All code files provided have a threshold slider. (All files have the same threshold slider). This threshold slider changes the binarization threshold of the image which can add or remove lines. For a threshold value $x$, all pixels with intensity values $>x$ will be black and all pixels with intensity values $<x$ will be white.

## Sparsifying by removing curves

This project performs sparsification on curves in 3 different methods:

- binarized_random.py: Randomly removes a percentage of curves in the image based on the slider value. 
  
- binarized_sorted.py: Removes a percentage of curves from smallest to largest based on area based on the slider value.
  
- binarized_clip.py: Generates 10 random images with the percent of curves removed and picks the image that has the highest CLIP similarity score. You can change how many images are generated by changing the self.complexity parameter in the code file. (Warning: High values of self.complexity could run very slow).

## Testing
You can test any sparsification method with the images provided in test_images or with your own images. 
